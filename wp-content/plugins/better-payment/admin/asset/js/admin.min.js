!function(e){e(document).ready(function(){"use strict";e(".bp-tabs .tab__link").on("click",function(t){t.preventDefault(),e(".bp-tabs .tab__link").removeClass("active"),e(this).addClass("active");var a=e(this).data("id");e(".bp-tabs .tab__content__item").removeClass("show").fadeOut(),e("#"+a).addClass("show").fadeIn()}),e(document).on("click",".sidebar__menu a",function(t){t.preventDefault();let a="sidebar__link";e(this).hasClass("sidebar__link_submenu")&&(a="sidebar__link_submenu"),e(".sidebar__menu ."+a).removeClass("active"),e(this).addClass("active");var n=e(this).data("id");e(".content__area__body .sidebar__tab__content").removeClass("show").fadeOut(),e("#"+n).addClass("show").fadeIn(),!e(this).hasClass("sidebar__link")||"admin-email"!==n&&"paypal"!==n||(e(this).siblings("ul").find("li a").removeClass("active"),e(this).siblings("ul").find("li:first-child a").addClass("active"))}),e(document).on("click",".sidebar__item .sidebar__link, .email-additional-headers",function(t){t.preventDefault();let a=e(this),n=e(this).hasClass("email-additional-headers")?".email-additional-headers-content":".sub__menu";a.siblings(n).hasClass("show")?a.siblings(n).removeClass("show").slideUp():(e(n+".show").slideUp().removeClass("show"),a.siblings(n).addClass("show").slideDown())}),e(document).on("change",'.better-payment-settings-payment-stripe input[name="better_payment_settings_payment_stripe_live_mode"]',function(t){t.preventDefault();let a=e(this).attr("data-targettest");e(this).is(":checked")&&(a=e(this).attr("data-targetlive")),e(".bp-stripe-key").removeClass("bp-d-block").addClass("bp-d-none"),e(`.${a}`).removeClass("bp-d-none").addClass("bp-d-block")}),e(document).on("change",'.better-payment-settings-payment-paypal input[name="better_payment_settings_payment_paypal_live_mode"]',function(t){t.preventDefault();let a=e(this).attr("data-targettest");e(this).is(":checked")&&(a=e(this).attr("data-targetlive")),e(".bp-paypal-key").removeClass("bp-d-block").addClass("bp-d-none"),e(`.${a}`).removeClass("bp-d-none").addClass("bp-d-block")}),e(document).on("click",".better-payment-admin-settings-button",function(t){t.preventDefault(),function(t,a){let n=e(t),s=betterPaymentObj.nonce,i=e(a).serializeArray(),r=function(t,a=[]){e("#better-payment-admin-settings-form input").removeClass("is-danger"),a.length||(a=["better_payment_settings_general_email_to","better_payment_settings_general_email_from_email","better_payment_settings_general_email_reply_to","better_payment_settings_general_email_cc","better_payment_settings_general_email_bcc","better_payment_settings_general_email_to_customer","better_payment_settings_general_email_from_email_customer","better_payment_settings_general_email_reply_to_customer","better_payment_settings_general_email_cc_customer","better_payment_settings_general_email_bcc_customer","better_payment_settings_payment_paypal_email"]);let n="",s="",i="",r=!1,o="";for(const l in t)if(i=t[l],n=i.name,s=i.value,a.indexOf(n)>=0&&""!=s&&!(r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)))return"better_payment_settings_general_email_to"==n?o="Admin Email: To Email":"better_payment_settings_general_email_from_email"==n?o="Admin Email: From Email":"better_payment_settings_general_email_reply_to"==n?o="Admin Email: Reply-To":"better_payment_settings_general_email_cc"==n?o="Admin Email: Cc":"better_payment_settings_general_email_bcc"==n&&(o="Admin Email: Bcc"),"better_payment_settings_general_email_to_customer"==n?o="Customer Email: To Email":"better_payment_settings_general_email_from_email_customer"==n?o="Customer Email: From Email":"better_payment_settings_general_email_reply_to_customer"==n?o="Customer Email: Reply-To":"better_payment_settings_general_email_cc_customer"==n?o="Customer Email: Cc":"better_payment_settings_general_email_bcc_customer"==n?o="Customer Email: Bcc":"better_payment_settings_payment_paypal_email"==n&&(o="PayPal Business Email"),toastr.error(`Invalid email address on ${o} field!`),e(`#better-payment-admin-settings-form input[name="${n}"]`).addClass("is-danger"),!1;return!0}(i);e(".better-payment-settings-reset").val(0),e(t).hasClass("better-payment-reset-button")&&e(".better-payment-settings-reset").val(1);if(!r)return!1;let o=e(t).hasClass("better-payment-reset-button");e.ajax({type:"POST",url:ajaxurl,data:{action:"better_payment_settings_action",nonce:s,form_data:i,reset_button:o},beforeSend:function(){n.addClass("is-loading")},success:function(e){n.removeClass("is-loading"),"success"===e.data?toastr.success("Changes saved successfully!"):toastr.error("Opps! something went wrong!")}})}(this,e(this).parents("#better-payment-admin-settings-form"))}),e(document).on("change",".better-payment .header__show_entries select",function(t){t.preventDefault();let a=e(this).val();location=location.origin+location.pathname+location.search+"&paged=1&per_page="+a+location.hash}),e(document).on("click",".better-payment-transaction-edit, .better-payment-transaction-email-resend",function(e){e.preventDefault(),toastr.warning("Coming REAL Soon!")}),e(document).on("click",".better-payment-transaction-filter",function(t){t.preventDefault();let a=e(".better-payment .payment_date_from").val(),n=e(".better-payment .payment_date_to").val();if(""!=a&&""!=n&&a>n)return toastr.error("From Date must be smaller than To Date!"),!1;let s=e(".better-payment-admin-transactions-page .transaction__table"),i={};i.search_text=e(".better-payment .serch-text").val(),i.payment_date_from=e(".better-payment .payment_date_from").val(),i.payment_date_to=e(".better-payment .payment_date_to").val(),i.order_by=e(".better-payment .order-by").val(),i.order=e(".better-payment .order").val(),i.source=e(".better-payment .source").val(),i.paged=e(".better-payment .paged").val(),i.per_page=e(".better-payment .per-page").val(),i.total_entry=e(".better-payment .total-entry").val(),function(t,a){e.ajax({type:"POST",url:ajaxurl,data:{action:"better-payment-filter-transaction",nonce:betterPaymentObj.nonce,filterFormData:a},dataType:"html",beforeSend:function(){t.css("opacity",".5")},success:function(a){e(".better-payment .transaction-table-wrapper").replaceWith(a),t.css("opacity","1")}})}(s,i)});let t=document.getElementsByClassName("bp-copy-clipboard");function a(){let t="bp_copy_clipboard_input_"+e(this).attr("data-bp_txn_counter");if(t=document.getElementById(t),document.body.createTextRange){const e=document.body.createTextRange();e.moveToElementText(t),e.select(),document.execCommand("copy")}else if(window.getSelection){const e=window.getSelection(),a=document.createRange();a.selectNodeContents(t),e.removeAllRanges(),e.addRange(a),document.execCommand("copy"),e.removeAllRanges()}else console.warn("Could not select text in node: Unsupported browser.");e(".bp-copy-clipboard").attr("title","Copy").css("color","#2a3256"),e(this).attr("title","Copied!").css("color","#6e58f7")}Array.from(t).forEach(function(e){e.addEventListener("click",a)}),toastr.options={timeOut:"2000",toastClass:"font-size-md",positionClass:"toast-top-center",showMethod:"slideDown",hideMethod:"slideUp"},e(".bp-datepicker").datepicker({dateFormat:"dd-mm-yy"})})}(jQuery);